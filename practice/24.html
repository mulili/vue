<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤„ç†è¾¹ç•Œæƒ…å†µï¼Œä½¿ç”¨èµ·æ¥éœ€è¦è°¨æ…çš„æ–¹æ³•æˆ–æ¨¡å¼</title>
</head>
<!-- 
  1. è¾¹ç•Œå¤„ç†æƒ…å†µæœ‰å…³çš„åŠŸèƒ½ï¼šå³ä¸€äº›éœ€è¦å¯¹Vueçš„è§„åˆ™åšä¸€äº›å°è°ƒæ•´çš„ç‰¹æ®Šæƒ…å†µï¼Œ
      æ³¨æ„ï¼šè¿™äº›åŠŸèƒ½éƒ½æ˜¯æœ‰åŠ£åŠ¿æˆ–å±é™©çš„åœºæ™¯ï¼Œå½“ä½¿ç”¨è¿™äº›åŠŸèƒ½æ—¶è¦ç¨åŠ ç•™æ„ï¼›

  2. è®¿é—®å…ƒç´  & ç»„ä»¶ï¼š
    2.1 è®¿é—®æ ¹ç»„ä»¶çš„å®ä¾‹
      å­ç»„ä»¶å¯ä»¥é€šè¿‡this.$rootæ¥è®¿é—®æ ¹ç»„ä»¶å®ä¾‹ï¼Œè¿›è€Œè¯»å–å®ƒçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œç”šè‡³å¯ä»¥æ”¹å†™ï¼Œ
      ä½†æ˜¯ï¼Œå®˜æ–¹å¼ºçƒˆæ¨èä½¿ç”¨ Vuex æ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ï¼›
    2.2 è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹
      this.$parent
      å¾ˆå¿«å®ƒå°±ä¼šå¤±æ§ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬é’ˆå¯¹éœ€è¦å‘ä»»æ„æ›´æ·±å±‚çº§çš„ç»„ä»¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯æ—¶æ¨èä¾èµ–æ³¨å…¥çš„åŸå› ï¼›
    2.3 è®¿é—®å­ç»„ä»¶æˆ–ç»„ä»¶è®¿é—®å†…éƒ¨çš„å…ƒç´ ï¼›
        ref="refName", this.$refs.refName,
        ä½¿ç”¨çš„åœºæ™¯åŒ…æ‹¬ï¼Œç„¦ç‚¹çš„æ§åˆ¶ç­‰ï¼Œä¸å¯æ»¥ç”¨ï¼›

  3.ä¾èµ–æ³¨å…¥ï¼Œä½¿ç”¨provide:function(){return {}} å’Œinject:['property'],
    å¯ä»¥åœ¨çˆ¶ç»„ä»¶é€šè¿‡provideæƒ³è¦æä¾›ç»™åä»£ç»„ä»¶çš„æ•°æ®/æ–¹æ³•,
    ç„¶ååœ¨ä»»æ„å±‚çº§çš„å­ç»„ä»¶ä¸Šé€šè¿‡injectæ¥ä½¿ç”¨è¯¥æ•°æ®æˆ–æ–¹æ³•ï¼›
    ä¾èµ–æ³¨å…¥ å¯ä»¥çœ‹ä½œâ€œå¤§èŒƒå›´æœ‰æ•ˆçš„propâ€ï¼Œé™¤äº†ï¼š
      çˆ¶ç»„ä»¶ä¸éœ€è¦çŸ¥é“å“ªäº›å­ç»„ä»¶ä½¿ç”¨å®ƒæä¾›çš„propertyï¼›
      å­ç»„ä»¶ä¸éœ€è¦çŸ¥é“è¢«æ³¨å…¥çš„propertyæ¥è‡ªå“ªé‡Œï¼›

    æ³¨æ„ï¼šä¾èµ–æ³¨å…¥è¿˜æ˜¯æœ‰è´Ÿé¢å½±å“çš„ï¼Œä½¿é‡æ„å˜å¾—å›°éš¾ï¼Œå¹¶ä¸”æ‰€æä¾›çš„propertyæ˜¯éå“åº”å¼çš„ï¼›
         
  4. Vuexï¼ŒçœŸæ­£çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼›

  5. ç¨‹åºåŒ–çš„äº‹ä»¶ä¾¦å¬å™¨ï¼š
      é€šè¿‡ $on(eventName, eventHandler) ä¾¦å¬ä¸€ä¸ªäº‹ä»¶
      é€šè¿‡ $once(eventName, eventHandler) ä¸€æ¬¡æ€§ä¾¦å¬ä¸€ä¸ªäº‹ä»¶
      é€šè¿‡ $off(eventName, eventHandler) åœæ­¢ä¾¦å¬ä¸€ä¸ªäº‹ä»¶

  6.  å¦‚æœä½ å‘ç°ä½ è‡ªå·±éœ€è¦åœ¨ Vue ä¸­åšä¸€æ¬¡å¼ºåˆ¶æ›´æ–°ï¼Œ99.9% çš„æƒ…å†µï¼Œæ˜¯ä½ åœ¨æŸä¸ªåœ°æ–¹åšé”™äº†äº‹ã€‚
      ä½ å¯èƒ½è¿˜æ²¡æœ‰ç•™æ„åˆ°æ•°ç»„æˆ–å¯¹è±¡çš„å˜æ›´æ£€æµ‹æ³¨æ„äº‹é¡¹ï¼Œæˆ–è€…ä½ å¯èƒ½ä¾èµ–äº†ä¸€ä¸ªæœªè¢« Vue çš„å“åº”å¼ç³»ç»Ÿè¿½è¸ªçš„çŠ¶æ€ã€‚
      ç„¶è€Œï¼Œå¦‚æœä½ å·²ç»åšåˆ°äº†ä¸Šè¿°çš„äº‹é¡¹ä»ç„¶å‘ç°åœ¨æå°‘æ•°çš„æƒ…å†µä¸‹éœ€è¦æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°ï¼Œ
      é‚£ä¹ˆä½ å¯ä»¥é€šè¿‡ $forceUpdate æ¥åšè¿™ä»¶äº‹ã€‚

  7.v-once:
      æ·»åŠ  v-once attribute ä»¥ç¡®ä¿è¿™äº›å†…å®¹åªè®¡ç®—ä¸€æ¬¡ç„¶åç¼“å­˜èµ·æ¥
      ä¸è¦è¿‡åº¦ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ã€‚å½“ä½ éœ€è¦æ¸²æŸ“å¤§é‡é™æ€å†…å®¹æ—¶ï¼Œæå°‘æ•°çš„æƒ…å†µä¸‹å®ƒä¼šç»™ä½ å¸¦æ¥ä¾¿åˆ©ï¼Œé™¤éä½ éå¸¸ç•™æ„æ¸²æŸ“å˜æ…¢äº†ï¼Œ
      ä¸ç„¶å®ƒå®Œå…¨æ˜¯æ²¡æœ‰å¿…è¦çš„â€”â€”å†åŠ ä¸Šå®ƒåœ¨åæœŸä¼šå¸¦æ¥å¾ˆå¤šå›°æƒ‘ã€‚
      ä¾‹å¦‚ï¼Œè®¾æƒ³å¦ä¸€ä¸ªå¼€å‘è€…å¹¶ä¸ç†Ÿæ‚‰ v-once æˆ–æ¼çœ‹äº†å®ƒåœ¨æ¨¡æ¿ä¸­ï¼Œä»–ä»¬å¯èƒ½ä¼šèŠ±å¾ˆå¤šä¸ªå°æ—¶å»æ‰¾å‡ºæ¨¡æ¿ä¸ºä»€ä¹ˆæ— æ³•æ­£ç¡®æ›´æ–°ã€‚

 -->

<body>
  <div id="app">
    {{abc}}
    <child1>
      <child2>
        <child3></child3>
      </child2>
    </child1>
  </div>

  <script src="./vue.js"></script>
  <script>
    const child1 = {
      template: `<div>child1
        <slot></slot>
        </div>`,
      provide: function () {
        return {
          secret: 'ğŸ¤«'
        }
      },
      mounted: function () {
        console.log(this)
      }
    }

    const child2 = {
      template: `
        <div>
          child2
           <slot></slot>
        </div>`,
      mounted: function () {
        console.log(this)
      }
    }

    const child3 = {
      template: `<div>child3</div>`,
      inject: ['secret'],
      mounted: function () {
        console.log('child3', this)
      }
    }

    new Vue({
      el: '#app',
      components: {
        child1,
        child2,
        child3,
      },
      data: {
        abc: 'abc'
      }
    })
  </script>
</body>

</html>